version: '2'
services:
  ps:
    build: .
    image: gensim_test:latest
    ports:
     - "8000:2222"
    command: python3 /test_tfw2v/test_distributed_tf.py --ps_hosts=ps:2222 --worker_hosts=worker:2223 --job_name=ps --task_index=0
    tty: true

  worker:
    build: .
    image: gensim_test:latest
    ports:
     - "800:2223"
    command: python3 /test_tfw2v/test_distributed_tf.py --ps_hosts=ps:2222 --worker_hosts=worker:2223 --job_name=worker --task_index=0
    tty: true

